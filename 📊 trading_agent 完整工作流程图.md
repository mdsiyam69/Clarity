ä»¥ `run_track("Warren Buffett")` ä¸ºä¾‹ï¼Œè¯¦ç»†è§£é‡Šæ•´ä¸ª skill ç³»ç»Ÿçš„å·¥ä½œæµç¨‹ï¼š

## ğŸ“Š å®Œæ•´å·¥ä½œæµç¨‹å›¾

```
ç”¨æˆ·è¾“å…¥: python run_agent.py track "Warren Buffett"
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    run_agent.py                             â”‚
â”‚                                                             â”‚
â”‚  1. åŠ è½½ .env ç¯å¢ƒå˜é‡                                       â”‚
â”‚  2. åˆ›å»º AgentConfig                                        â”‚
â”‚  3. åˆ›å»º FinancialAgentOrchestrator                         â”‚
â”‚  4. è°ƒç”¨ orchestrator.run(task_type=HOLDINGS_TRACKING, ...)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               FinancialAgentOrchestrator.run()              â”‚
â”‚                                                             â”‚
â”‚  1. åˆ›å»º TaskContext(task_type, target, trade_date)         â”‚
â”‚  2. MasterAgent.create_task_plan() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  3. WorkingAgent.execute_plan() â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  4. StateChecker.validate_final_state()      â”‚              â”‚
â”‚  5. MasterAgent.synthesize_results()         â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                      â”‚
                        â”‚                      â–¼
                        â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚     â”‚     PlanningManager            â”‚
                        â”‚     â”‚                                â”‚
                        â”‚     â”‚  åˆå§‹åŒ– planning-with-files:   â”‚
                        â”‚     â”‚  â€¢ task_plan.md                â”‚
                        â”‚     â”‚  â€¢ findings.md                 â”‚
                        â”‚     â”‚  â€¢ progress.md                 â”‚
                        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
```

## ğŸ” è¯¦ç»†æ­¥éª¤è§£æ

### æ­¥éª¤ 1: å…¥å£è°ƒç”¨

```python:80:95:TradingAgents/run_agent.py
async def run_track(investor_name: str, trade_date: str | None = None) -> None:
    """Track an investor's holdings."""
    config = AgentConfig()
    orchestrator = FinancialAgentOrchestrator(config)

    print(f"\n{'='*60}")
    print(f"ğŸ” Tracking Holdings: {investor_name}")
    print(f"{'='*60}\n")

    result = await orchestrator.run(
        task_type=TaskType.HOLDINGS_TRACKING,
        target=investor_name,
        trade_date=trade_date or datetime.now().strftime("%Y-%m-%d"),
    )

    _print_result(result)
```

### æ­¥éª¤ 2: MasterAgent åˆ›å»ºä»»åŠ¡è®¡åˆ’

```
MasterAgent.create_task_plan(context)
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ ¹æ® task_type=HOLDINGS_TRACKING å†³å®šéœ€è¦å“ªäº› SubAgents â”‚
â”‚                                                           â”‚
â”‚     subagent_assignments = {                              â”‚
â”‚         "holdings_hunter": ["Track investor holdings"],   â”‚
â”‚         "news_analyst": ["Find related news"],            â”‚
â”‚     }                                                     â”‚
â”‚     priority_order = ["holdings_hunter", "news_analyst"]  â”‚
â”‚                                                           â”‚
â”‚  2. åˆå§‹åŒ– planning files (task_plan.md, findings.md,     â”‚
â”‚     progress.md)                                          â”‚
â”‚                                                           â”‚
â”‚  3. è¿”å› TaskPlan å¯¹è±¡                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æ­¤æ—¶ `task_plan.md` è¢«åˆ›å»ºï¼š

```markdown
# Task Plan: Financial Intelligence Agent Task

## Goal
è·Ÿè¸ª Warren Buffett çš„æœ€æ–°æŒä»“

## Task Type
holdings_tracking

## Phases
### Phase 1: Requirements & Discovery
- **Status:** in_progress

### Phase 2: Data Collection & Analysis
- **Status:** pending
...
```

### æ­¥éª¤ 3: WorkingAgent æ‰§è¡Œè®¡åˆ’

```
WorkingAgent.execute_plan(task_plan, context)
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éå† priority_order ä¸­çš„æ¯ä¸ª SubAgent:                    â”‚
â”‚                                                           â”‚
â”‚  Step 0: holdings_hunter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚                                                   â”‚  â”‚
â”‚    â–¼                                                   â”‚  â”‚
â”‚  HoldingsHunter.execute(context)                       â”‚  â”‚
â”‚    â”‚                                                   â”‚  â”‚
â”‚    â”œâ”€â–º _search_guru_holdings("Warren Buffett")         â”‚  â”‚
â”‚    â”‚     â””â”€â–º SERPER API æœç´¢æŒä»“ä¿¡æ¯                    â”‚  â”‚
â”‚    â”‚                                                   â”‚  â”‚
â”‚    â”œâ”€â–º _search_13f_filings("Warren Buffett")           â”‚  â”‚
â”‚    â”‚     â””â”€â–º SERPER API æœç´¢ SEC 13F æ–‡ä»¶              â”‚  â”‚
â”‚    â”‚                                                   â”‚  â”‚
â”‚    â””â”€â–º ç”ŸæˆæŠ¥å‘Š â†’ AgentResult                          â”‚  â”‚
â”‚                                                        â”‚  â”‚
â”‚  StateChecker.check_step(step) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚    â”‚                                                      â”‚
â”‚    â”œâ”€â–º æˆåŠŸ â†’ ç»§ç»­ä¸‹ä¸€æ­¥                                  â”‚
â”‚    â””â”€â–º å¤±è´¥ â†’ é‡è¯•é€»è¾‘ (æœ€å¤š3æ¬¡)                          â”‚
â”‚                                                           â”‚
â”‚  Step 1: news_analyst â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚                                                   â”‚  â”‚
â”‚    â–¼                                                   â”‚  â”‚
â”‚  NewsAnalyst.execute(context)                          â”‚  â”‚
â”‚    â””â”€â–º æœç´¢ç›¸å…³æ–°é—»                                     â”‚  â”‚
â”‚                                                        â”‚  â”‚
â”‚  StateChecker.check_step(step) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤ 4: æ¯æ­¥æ‰§è¡Œåæ›´æ–° Planning Files

```
æ¯ä¸ª SubAgent æ‰§è¡Œå:
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PlanningManager.append_findings()                        â”‚
â”‚    â””â”€â–º findings.md è¿½åŠ åˆ†æç»“æœ                           â”‚
â”‚                                                           â”‚
â”‚  PlanningManager.append_progress()                        â”‚
â”‚    â””â”€â–º progress.md è¿½åŠ è¿›åº¦æ—¥å¿—                           â”‚
â”‚                                                           â”‚
â”‚  PlanningManager.update_subagent_status()                 â”‚
â”‚    â””â”€â–º task_plan.md æ›´æ–° SubAgent çŠ¶æ€è¡¨                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤ 5: StateChecker é‡è¯•é€»è¾‘

```
StateCheckerAgent.check_step(step)
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  if step.status == "complete":                            â”‚
â”‚      return SUCCESS â†’ ç»§ç»­                                â”‚
â”‚                                                           â”‚
â”‚  if step.status == "failed":                              â”‚
â”‚      â”‚                                                    â”‚
â”‚      â”œâ”€â–º retry_count >= 3?                                â”‚
â”‚      â”‚     â””â”€â–º æ˜¯å…³é”®æ­¥éª¤? â†’ REPLAN (é‡æ–°è§„åˆ’)            â”‚
â”‚      â”‚     â””â”€â–º éå…³é”®æ­¥éª¤? â†’ SKIP (è·³è¿‡)                  â”‚
â”‚      â”‚                                                    â”‚
â”‚      â”œâ”€â–º é”™è¯¯ç±»å‹åˆ†æ:                                    â”‚
â”‚      â”‚     timeout/connection â†’ RETRY                     â”‚
â”‚      â”‚     no data/not found â†’ SKIP                       â”‚
â”‚      â”‚     auth error â†’ REPLAN                            â”‚
â”‚      â”‚                                                    â”‚
â”‚      â””â”€â–º é»˜è®¤ â†’ RETRY                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤ 6: ç»“æœç»¼åˆ

```
MasterAgent.synthesize_results(results, context)
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆå¹¶æ‰€æœ‰ SubAgent çš„æŠ¥å‘Š:                                 â”‚
â”‚                                                           â”‚
â”‚  # Financial Analysis Report: Warren Buffett              â”‚
â”‚                                                           â”‚
â”‚  ## Holdings Hunter                                       â”‚
â”‚  [æŒä»“è¿½è¸ªæŠ¥å‘Š]                                            â”‚
â”‚                                                           â”‚
â”‚  ## News Analyst                                          â”‚
â”‚  [ç›¸å…³æ–°é—»åˆ†æ]                                            â”‚
â”‚                                                           â”‚
â”‚  ## Recommendation                                        â”‚
â”‚  [æŠ•èµ„å»ºè®®]                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—‚ï¸ Planning-with-Files çš„æ ¸å¿ƒä½œç”¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä¸ºä»€ä¹ˆéœ€è¦ Planning Files?                 â”‚
â”‚                                                             â”‚
â”‚  é—®é¢˜: LLM çš„ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼Œé•¿ä»»åŠ¡å®¹æ˜“"å¿˜è®°"æœ€åˆç›®æ ‡         â”‚
â”‚                                                             â”‚
â”‚  è§£å†³æ–¹æ¡ˆ: å°†é‡è¦ä¿¡æ¯æŒä¹…åŒ–åˆ°æ–‡ä»¶ç³»ç»Ÿ                        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ task_plan.mdâ”‚   â”‚ findings.md â”‚   â”‚ progress.md â”‚       â”‚
â”‚  â”‚             â”‚   â”‚             â”‚   â”‚             â”‚       â”‚
â”‚  â”‚ â€¢ ä»»åŠ¡ç›®æ ‡  â”‚   â”‚ â€¢ ç ”ç©¶å‘ç°  â”‚   â”‚ â€¢ æ‰§è¡Œæ—¥å¿—  â”‚       â”‚
â”‚  â”‚ â€¢ é˜¶æ®µçŠ¶æ€  â”‚   â”‚ â€¢ åˆ†æç»“æœ  â”‚   â”‚ â€¢ é”™è¯¯è®°å½•  â”‚       â”‚
â”‚  â”‚ â€¢ å†³ç­–è®°å½•  â”‚   â”‚ â€¢ APIæ•°æ®   â”‚   â”‚ â€¢ é‡è¯•è¿½è¸ª  â”‚       â”‚
â”‚  â”‚ â€¢ é”™è¯¯è¿½è¸ª  â”‚   â”‚             â”‚   â”‚             â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                             â”‚
â”‚  å…³é”®è§„åˆ™:                                                  â”‚
â”‚  â€¢ 2-Action Rule: æ¯2æ¬¡æ“ä½œåæ›´æ–° findings.md               â”‚
â”‚  â€¢ å†³ç­–å‰é‡è¯» task_plan.md (æ³¨æ„åŠ›æ“æ§)                     â”‚
â”‚  â€¢ æ‰€æœ‰é”™è¯¯éƒ½è®°å½•åˆ°æ–‡ä»¶ (é¿å…é‡å¤çŠ¯é”™)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ å®é™…æ–‡ä»¶ç¤ºä¾‹

æ‰§è¡Œ `run_track("Warren Buffett")` åç”Ÿæˆçš„æ–‡ä»¶ï¼š

**task_plan.md:**
```markdown
## SubAgent Assignments
| SubAgent | Task | Status | Retry Count |
|----------|------|--------|-------------|
| HoldingsHunter | Track investor holdings | complete | 0 |
| NewsAnalyst | Find related news | complete | 0 |
```

**findings.md:**
```markdown
### HoldingsHunter Report
## Holdings Search Results for Warren Buffett
**Berkshire Hathaway Q4 2024 13F Filing**
Top holdings: AAPL, BAC, KO, AXP...

### NewsAnalyst Report
## Web News Search Results
**Buffett's Latest Moves**...
```

**progress.md:**
```markdown
**[2026-01-18 20:15:30] Phase 2 (WorkingAgent):**
Step 1 complete: holdings_hunter
Task: Track investor holdings
Duration: 5.2s

**[2026-01-18 20:15:36] Phase 2 (WorkingAgent):**
Step 2 complete: news_analyst
Task: Find related news
Duration: 3.1s
```

è¿™å°±æ˜¯æ•´ä¸ª claude-skill é£æ ¼çš„ planning-with-files ç³»ç»Ÿå¦‚ä½•åè°ƒå¤šä¸ª SubAgent å®Œæˆå¤æ‚ä»»åŠ¡çš„å®Œæ•´æµç¨‹ï¼